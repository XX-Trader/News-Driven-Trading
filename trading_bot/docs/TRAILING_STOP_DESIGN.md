# Trading Bot 追踪止损设计文档 (简化版)

**版本**: v1.1.0
**最后更新**: 2025-11-23
**文档状态**: 已更新 (简化设计)

---

## 1. 概述

### 1.1 设计目标

提供基础的利润保护机制，在价格向有利方向移动时锁定利润。

### 1.2 核心原则

1.  **极度简化**: 移除复杂的 ATR 算法和多阶段追踪。
2.  **延迟实现**: 明确标记为后续版本功能，当前版本仅使用分批止盈和固定止损。
3.  **基础功能**: 仅保留最简单的“固定百分比回撤”逻辑。

---

## 2. 当前策略 (v1.x)

当前版本**不实现**追踪止损，而是采用更简单可靠的组合策略：

1.  **分批止盈 (Partial Take Profit)**:
    - 到达目标价位 1 (如 +3%)，平仓 50%。
    - 到达目标价位 2 (如 +6%)，平仓剩余 50%。
    - **优点**: 简单直接，确保落袋为安。

2.  **固定止损 (Fixed Stop Loss)**:
    - 价格触及止损线 (如 -5%)，立即全部平仓。
    - **优点**: 风险可控，无计算开销。

---

## 3. 未来规划 (v2.x)

在后续版本中，将引入基础的追踪止损功能。

### 3.1 算法设计

仅支持 **百分比追踪 (Percentage Trailing)**：

- **激活条件**: 盈利达到一定比例 (如 +2%)。
- **追踪逻辑**: 记录持仓期间的最高价 (High Water Mark)。
- **触发条件**: 当前价格从最高价回撤超过设定百分比 (如 1%)。

### 3.2 逻辑示例

```python
# 伪代码
if current_price > highest_price:
    highest_price = current_price

trailing_stop_price = highest_price * (1 - trailing_percent)

if current_price < trailing_stop_price:
    close_position()
```

---

## 4. 总结

当前阶段专注于基础交易功能的稳定性，追踪止损作为高级特性推迟到 v2.x 版本实现。目前的“分批止盈 + 固定止损”策略已能满足基本的风险控制需求。